# Chapter 1: ç®€çº¦å³ç¾ - Excalidraw çš„æ ¸å¿ƒè®¾è®¡å“²å­¦

## å¼•å­ï¼šä¸€ä¸ªä»¤äººæ·±æ€çš„ç°è±¡

> "ä¸ºä»€ä¹ˆåŠŸèƒ½ç®€å•çš„ Excalidraw èƒ½åœ¨åŠŸèƒ½ä¸°å¯Œçš„ Figmaã€å¤æ‚å¼ºå¤§çš„ Adobe äº§å“å¤¹å‡»ä¸‹ï¼Œä¾ç„¶è·å¾—å¼€å‘è€…å’Œè®¾è®¡å¸ˆçš„ä¸€è‡´å–œçˆ±ï¼Ÿ"

ç­”æ¡ˆä¸åœ¨äºå®ƒåšäº†å¤šå°‘åŠŸèƒ½ï¼Œè€Œåœ¨äºå®ƒ**é€‰æ‹©ä¸åšä»€ä¹ˆ**ã€‚

## å­¦ä¹ ç›®æ ‡

- [ ] ç†è§£ç®€çº¦è®¾è®¡èƒŒåçš„å“²å­¦æ€è€ƒ
- [ ] æŒæ¡"åšå‡æ³•"çš„è®¾è®¡å†³ç­–æ–¹æ³•
- [ ] é¢†æ‚Ÿæ‰‹ç»˜ç¾å­¦çš„æ·±å±‚ä»·å€¼
- [ ] å»ºç«‹è®¤çŸ¥è´Ÿæ‹…æœ€å°åŒ–çš„è®¾è®¡åŸåˆ™
- [ ] åŸ¹å…»åŠŸèƒ½çº¦æŸä¸‹çš„åˆ›æ–°æ€ç»´

## 1. è®¾è®¡å“²å­¦çš„æºå¤´ï¼šæ‰‹ç»˜çš„åŠ›é‡

### 1.1 æ‰‹ç»˜ç¾å­¦çš„å“²å­¦æ„ä¹‰

Excalidraw æœ€æ˜¾è‘—çš„ç‰¹å¾æ˜¯æ‰‹ç»˜é£æ ¼ã€‚ä½†è¿™ä¸æ˜¯ä¸€ä¸ªæŠ€æœ¯é€‰æ‹©ï¼Œè€Œæ˜¯ä¸€ä¸ª**å“²å­¦é€‰æ‹©**ã€‚

**æ·±å±‚æ€è€ƒï¼šä¸ºä»€ä¹ˆé€‰æ‹©æ‰‹ç»˜é£æ ¼ï¼Ÿ**

#### ğŸ¯ **é™ä½å¿ƒç†é—¨æ§›**
- **ç²¾ç¾çš„å›¾å½¢è®©äººå®³æ€•"ç”»å"**ï¼šå®Œç¾çš„çº¿æ¡å’Œå½¢çŠ¶ä¼šè®©ç”¨æˆ·æ‹…å¿ƒç ´åè¿™ç§å®Œç¾
- **æ‰‹ç»˜é£æ ¼æš—ç¤º"ä¸å®Œç¾æ˜¯å¯ä»¥çš„"**ï¼šç²—ç³™çš„çº¿æ¡ä¼ è¾¾äº†"è¿™åªæ˜¯è‰å›¾"çš„ä¿¡æ¯
- **é¼“åŠ±ç”¨æˆ·ä¸“æ³¨äºæƒ³æ³•è¡¨è¾¾è€Œéè§†è§‰å®Œç¾**ï¼šå‡å°‘äº†å¯¹ç¾è§‚çš„ç„¦è™‘ï¼Œå¢å¼ºäº†è¡¨è¾¾çš„å‹‡æ°”

#### ğŸ¤ **ä¿ƒè¿›åä½œæ²Ÿé€š**
- **æ‰‹ç»˜å›¾å¤©ç„¶å…·æœ‰"è‰ç¨¿"å±æ€§**ï¼šé‚€è¯·ä»–äººå‚ä¸è®¨è®ºå’Œä¿®æ”¹
- **é™ä½å¯¹"å®Œæˆå“"çš„æ‰§ç€**ï¼šå…è®¸ä¸æ–­è¿­ä»£å’Œæ”¹è¿›
- **è¥é€ "ä¸€èµ·è®¨è®ºå’Œå®Œå–„"çš„æ°›å›´**ï¼šè€Œä¸æ˜¯"å±•ç¤ºå®Œç¾ä½œå“"çš„å‹åŠ›

#### ğŸ§  **è®¤çŸ¥å¿ƒç†å­¦æ”¯æ’‘**
- **ç ”ç©¶è¡¨æ˜ï¼šæ‰‹ç»˜å›¾è¡¨æ›´å®¹æ˜“å¼•å‘åˆ›é€ æ€§æ€è€ƒ**
- **è¿‡äºå®Œç¾çš„å›¾å½¢ä¼šæŠ‘åˆ¶ä¿®æ”¹å’Œè®¨è®ºçš„æ¬²æœ›**
- **æ‰‹ç»˜é£æ ¼æ¿€å‘å¤§è„‘çš„"æ¢ç´¢æ¨¡å¼"**

### 1.2 æŠ€æœ¯é€‰æ‹©èƒŒåçš„è®¾è®¡å“²å­¦

**Canvas vs SVG vs DOMï¼šä¸ä»…ä»…æ˜¯æŠ€æœ¯é—®é¢˜**

| ç»´åº¦ | Canvas é€‰æ‹© | è®¾è®¡æ€è€ƒ |
|------|------------|----------|
| **æ€§èƒ½ä½“éªŒ** | å¤§é‡å…ƒç´ æµç•…æ¸²æŸ“ | ç”¨æˆ·ä½“éªŒä¼˜äºæŠ€æœ¯ä¼˜é›… |
| **æ§åˆ¶åŠ›** | å®Œå…¨çš„åƒç´ çº§æ§åˆ¶ | è®¾è®¡å¸ˆéœ€è¦ç²¾ç¡®æŒæ§è¡¨è¾¾æ•ˆæœ |
| **åä½œå‹å¥½** | çŠ¶æ€ç®¡ç†ç®€å•ç›´æ¥ | å®æ—¶åä½œçš„æŠ€æœ¯åŸºç¡€ |
| **å¯¼å‡ºè‡ªç„¶** | ç›´æ¥ç”Ÿæˆå›¾ç‰‡ | ç”¨æˆ·ä»·å€¼å¯¼å‘çš„æŠ€æœ¯é€‰æ‹© |

**æ ¸å¿ƒè®¾è®¡åŸåˆ™ä½“ç°ï¼š**
```
Excalidraw çš„æŠ€æœ¯é€‰æ‹©å§‹ç»ˆé—®ä¸€ä¸ªé—®é¢˜ï¼š
"è¿™ä¸ªé€‰æ‹©æ˜¯è®©ç”¨æˆ·æ›´å®¹æ˜“è¡¨è¾¾æƒ³æ³•ï¼Œè¿˜æ˜¯è®©æŠ€æœ¯æ›´ç‚«é…·ï¼Ÿ"

å¦‚æœæ˜¯åè€…ï¼Œä»–ä»¬é€‰æ‹©ä¸åšã€‚
```

## 2. åŠŸèƒ½å“²å­¦ï¼šåšå‡æ³•çš„è‰ºæœ¯

### 2.1 ç®€çº¦è®¾è®¡çš„æ ¸å¿ƒæŒ‘æˆ˜

**æœ€éš¾çš„ä¸æ˜¯å¢åŠ åŠŸèƒ½ï¼Œè€Œæ˜¯æ‹’ç»è¯±æƒ‘**

å½“æˆ‘ä»¬åˆ†æ Excalidraw çš„åŠŸèƒ½è®¾è®¡æ—¶ï¼Œä¼šå‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼šå®ƒ**æ²¡æœ‰åšçš„åŠŸèƒ½**æ¯”å®ƒ**åšäº†çš„åŠŸèƒ½**æ›´èƒ½ä½“ç°å…¶è®¾è®¡æ™ºæ…§ã€‚

**æ ¸å¿ƒé—®é¢˜ï¼šExcalidraw ä¸ºä»€ä¹ˆä¸åšè¿™äº›åŠŸèƒ½ï¼Ÿ**

| å¸¸è§åŠŸèƒ½ | Excalidraw çš„é€‰æ‹© | è®¾è®¡å“²å­¦ |
|---------|-------------------|----------|
| **å›¾å±‚ç³»ç»Ÿ** | âŒ ä¸æ”¯æŒ | é¿å…å¤æ‚çš„å±‚çº§ç®¡ç†ï¼Œä¸“æ³¨äºæ‰å¹³åŒ–æ€ç»´ |
| **ç²¾ç¡®å®šä½** | âŒ ä¸æ”¯æŒ | æ‰‹ç»˜ç²¾ç¥ï¼šå¤§æ¦‚ä½ç½®æ¯”ç²¾ç¡®åƒç´ æ›´é‡è¦ |
| **ä¸°å¯Œæ ¼å¼** | âŒ æç®€æ”¯æŒ | é¿å…æ ¼å¼é€‰æ‹©çš„è®¤çŸ¥è´Ÿæ‹… |
| **å¤æ‚åŠ¨ç”»** | âŒ ä¸æ”¯æŒ | ä¸“æ³¨äºé™æ€è¡¨è¾¾çš„æ¸…æ™°æ€§ |
| **é«˜çº§æ»¤é•œ** | âŒ ä¸æ”¯æŒ | é¿å…"æŠ€æœ¯ç‚«æŠ€"ï¼Œå›å½’è¡¨è¾¾æœ¬è´¨ |
| **è‡ªå®šä¹‰å­—ä½“** | âŒ æç®€å­—ä½“ | å‡å°‘å­—ä½“é€‰æ‹©çš„å†³ç­–è´Ÿæ‹… |
| **æ¸å˜å¡«å……** | âŒ çº¯è‰²ä¸ºä¸» | ä¿æŒæ‰‹ç»˜çš„æœ´ç´ ç¾æ„Ÿ |

### 2.2 è®¾è®¡å†³ç­–çš„æ€è€ƒæ¡†æ¶

**æ¯ä¸ª"ä¸åš"çš„å†³å®šéƒ½æ¥è‡ªä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š**

> "è¿™ä¸ªåŠŸèƒ½æ˜¯è®©ç”¨æˆ·**æ›´å®¹æ˜“è¡¨è¾¾æƒ³æ³•**ï¼Œè¿˜æ˜¯è®©å·¥å…·**æ˜¾å¾—æ›´å¼ºå¤§**ï¼Ÿ"

**Excalidraw å›¢é˜Ÿçš„è®¾è®¡ä»·å€¼è§‚ï¼š**

1. **è¡¨è¾¾ä¼˜å…ˆäºç¾è§‚**
   ```
   ç”¨æˆ·æ¥ Excalidraw æ˜¯ä¸ºäº†å¿«é€Ÿè¡¨è¾¾æƒ³æ³•ï¼Œ
   ä¸æ˜¯ä¸ºäº†åˆ¶ä½œç²¾ç¾çš„è®¾è®¡ä½œå“ã€‚

   æ¯ä¸ªåŠŸèƒ½éƒ½è¦é—®ï¼šè¿™ä¼šè®©è¡¨è¾¾æ›´å¿«è¿˜æ˜¯æ›´æ…¢ï¼Ÿ
   ```

2. **ç†è§£ä¼˜äºå®Œç¾**
   ```
   å›¾è¡¨çš„ç›®çš„æ˜¯è®©äººç†è§£ï¼Œä¸æ˜¯è®©äººæƒŠå¹ã€‚

   æ‰‹ç»˜çš„"ä¸å®Œç¾"åè€Œæ›´å®¹æ˜“å¼•èµ·å…±é¸£å’Œè®¨è®ºã€‚
   ```

3. **ä¸“æ³¨ä¼˜äºå…¨é¢**
   ```
   åšå¥½ä¸€ä»¶äº‹ï¼Œæ¯”åšå¾ˆå¤šä»¶äº‹æ›´æœ‰ä»·å€¼ã€‚

   ä¸“æ³¨è®©å›¢é˜Ÿå’Œç”¨æˆ·éƒ½èƒ½ä¿æŒæ¸…æ™°çš„ç›®æ ‡ã€‚
   ```

## 3. äº¤äº’å“²å­¦ï¼šç›´è§‰ä¼˜äºå­¦ä¹ 

### 3.1 è®¤çŸ¥è´Ÿæ‹…æœ€å°åŒ–åŸåˆ™

**è®¾è®¡åŸåˆ™ï¼šç”¨æˆ·ä¸åº”è¯¥å­¦ä¹ å·¥å…·ï¼Œå·¥å…·åº”è¯¥ç†è§£ç”¨æˆ·**

Excalidraw çš„äº¤äº’è®¾è®¡éµå¾ªä¸€ä¸ªæ ¸å¿ƒç†å¿µï¼š**é™ä½è®¤çŸ¥è´Ÿæ‹…**ã€‚è¿™ä¸ä»…ä»…æ˜¯ç•Œé¢ç®€æ´ï¼Œæ›´æ˜¯æ€ç»´æ¨¡å¼çš„ç®€åŒ–ã€‚

#### ğŸ¯ **å·¥å…·æ è®¾è®¡å“²å­¦**

**ä¼ ç»Ÿè®¾è®¡æ€è·¯ vs Excalidraw æ€è·¯**

| ç»´åº¦ | ä¼ ç»Ÿå·¥å…·æ€è·¯ | Excalidraw æ€è·¯ |
|------|------------|----------------|
| **åŠŸèƒ½å±•ç¤º** | å±•ç¤ºæ‰€æœ‰å¯ç”¨åŠŸèƒ½ | åªæ˜¾ç¤ºæœ€æ ¸å¿ƒçš„å·¥å…· |
| **è®¾è®¡ç›®æ ‡** | åŠŸèƒ½ä¸°å¯Œæ€§å±•ç¤º | è®¤çŸ¥è´Ÿæ‹…æœ€å°åŒ– |
| **ç”¨æˆ·å¿ƒæ™º** | "çœ‹çœ‹è¿™ä¸ªå·¥å…·å¤šå¼ºå¤§" | "ä¸“æ³¨äºä½ è¦è¡¨è¾¾çš„å†…å®¹" |
| **å­¦ä¹ æˆæœ¬** | éœ€è¦å­¦ä¹ å„ç§åŠŸèƒ½ | 5åˆ†é’Ÿå³å¯æŒæ¡å…¨éƒ¨åŠŸèƒ½ |

**å…·ä½“ä½“ç°ï¼š**
```
Excalidraw å·¥å…·æ åªæœ‰ 8 ä¸ªåŸºç¡€å·¥å…·ï¼š
- é€‰æ‹©ã€çŸ©å½¢ã€è±å½¢ã€åœ†å½¢ã€ç®­å¤´ã€çº¿æ¡ã€è‡ªç”±ç»˜åˆ¶ã€æ–‡æœ¬

é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸åŠ å…¥æ›´å¤šå›¾å½¢ï¼Ÿ
ç­”æ¡ˆï¼šæ¯å¤šä¸€ä¸ªé€‰æ‹©ï¼Œå°±å¤šä¸€åˆ†è®¤çŸ¥è´Ÿæ‹…ã€‚
```

#### ğŸ¹ **å¿«æ·é”®å“²å­¦ï¼šç¬¦åˆç›´è§‰çš„æ˜ å°„**

**è®¾è®¡åŸåˆ™ï¼šå¿«æ·é”®åº”è¯¥æ¥è‡ªç”¨æˆ·çš„ç›´è§‰è”æƒ³**

```
Excalidraw çš„å¿«æ·é”®è®¾è®¡ï¼š
- R = Rectangleï¼ˆçŸ©å½¢ï¼‰ - è‹±æ–‡é¦–å­—æ¯
- T = Textï¼ˆæ–‡æœ¬ï¼‰ - è‹±æ–‡é¦–å­—æ¯
- A = Arrowï¼ˆç®­å¤´ï¼‰ - è‹±æ–‡é¦–å­—æ¯

è€Œä¸æ˜¯ï¼š
- Ctrl+Shift+R = çŸ©å½¢
- Alt+T = æ–‡æœ¬
- F2 = ç®­å¤´
```

**è®¾è®¡æ€è€ƒï¼š**
- **å•é”®æ“ä½œä¼˜äºç»„åˆé”®**ï¼šå‡å°‘è®°å¿†è´Ÿæ‹…
- **è¯­ä¹‰åŒ–ä¼˜äºé¡ºåºåŒ–**ï¼šRä»£è¡¨Rectangleæ¯”F1å¥½è®°
- **ä¸€è‡´æ€§ä¼˜äºç‰¹æ®Šæ€§**ï¼šæ‰€æœ‰å›¾å½¢å·¥å…·éƒ½ç”¨é¦–å­—æ¯

### 3.2 çŠ¶æ€åé¦ˆçš„è®¾è®¡è‰ºæœ¯

#### ğŸ”„ **å®æ—¶åé¦ˆï¼šè®©ç”¨æˆ·æ„Ÿå—æ§åˆ¶æ„Ÿ**

**è®¾è®¡å“²å­¦ï¼šç”¨æˆ·çš„æ¯ä¸ªæ“ä½œéƒ½åº”è¯¥å¾—åˆ°å³æ—¶çš„è§†è§‰åé¦ˆ**

1. **ç»˜åˆ¶è¿‡ç¨‹åé¦ˆ**
   ```
   ä¼ ç»Ÿè½¯ä»¶ï¼šç‚¹å‡»ç¡®å®šåæ‰çœ‹åˆ°æ•ˆæœ
   Excalidrawï¼šæ‹–æ‹½è¿‡ç¨‹ä¸­å®æ—¶é¢„è§ˆæœ€ç»ˆæ•ˆæœ

   è¿™è®©ç”¨æˆ·æ„Ÿè§‰åœ¨"å¡‘é€ "è€Œé"å‘½ä»¤"
   ```

2. **é€‰æ‹©çŠ¶æ€åé¦ˆ**
   ```
   é€‰ä¸­å…ƒç´ ï¼šç«‹å³æ˜¾ç¤ºæ“ä½œæ‰‹æŸ„
   å¤šé€‰çŠ¶æ€ï¼šæ¸…æ™°çš„è§†è§‰åˆ†ç»„
   æ‚¬åœçŠ¶æ€ï¼šå¾®å¦™çš„é«˜äº®æç¤º

   è®©ç”¨æˆ·å§‹ç»ˆæ˜ç¡®å½“å‰çŠ¶æ€
   ```

3. **æ“ä½œç»“æœåé¦ˆ**
   ```
   æ¯ä¸ªæ“ä½œéƒ½æœ‰å¯¹åº”çš„è§†è§‰åé¦ˆï¼š
   - åˆ›å»ºï¼šæ–°å…ƒç´ ç«‹å³å‡ºç°
   - åˆ é™¤ï¼šå…ƒç´ ç«‹å³æ¶ˆå¤±
   - ç§»åŠ¨ï¼šå®æ—¶ä½ç½®æ›´æ–°

   ä¸è®©ç”¨æˆ·çŒœæµ‹æ˜¯å¦ç”Ÿæ•ˆ
   ```

## 4. æ€§èƒ½å“²å­¦ï¼šä½“éªŒä¼˜äºç‚«æŠ€

### 4.1 60fps çš„å“²å­¦æ„ä¹‰

**æ ¸å¿ƒä¿¡å¿µï¼šæµç•…ä½“éªŒæ¯” 1000 ä¸ªåŠŸèƒ½æ›´é‡è¦**

Excalidraw çš„ä¸€ä¸ªæ˜¾è‘—ç‰¹ç‚¹æ˜¯å³ä½¿åœ¨å¤æ‚åœºæ™¯ä¸‹ä¹Ÿèƒ½ä¿æŒæµç•…çš„æ“ä½œä½“éªŒã€‚è¿™ä¸æ˜¯å·§åˆï¼Œè€Œæ˜¯**åˆ»æ„çš„è®¾è®¡é€‰æ‹©**ã€‚

#### ğŸš€ **æ€§èƒ½ä¼˜å…ˆçš„è®¾è®¡æ€è€ƒ**

**ä¸ºä»€ä¹ˆé€‰æ‹© Canvas è€Œä¸æ˜¯ SVGï¼Ÿ**

è¿™ä¸ªæŠ€æœ¯é€‰æ‹©èƒŒåä½“ç°äº†æ·±å±‚çš„è®¾è®¡å“²å­¦ï¼š

```
è®¾è®¡è€ƒè™‘ä¼˜å…ˆçº§ï¼š
1. å¤§é‡å…ƒç´ æ—¶çš„æ¸²æŸ“æ€§èƒ½ â†’ ç”¨æˆ·ä½“éªŒç¬¬ä¸€
2. å®æ—¶åä½œçš„çŠ¶æ€åŒæ­¥æ•ˆç‡ â†’ åä½œä½“éªŒç¬¬ä¸€
3. ç”¨æˆ·æ“ä½œçš„å“åº”é€Ÿåº¦ â†’ äº¤äº’ä½“éªŒç¬¬ä¸€
4. å†…å­˜ä½¿ç”¨çš„å¯æ§æ€§ â†’ ç¨³å®šæ€§ç¬¬ä¸€

æŠ€æœ¯é€‰æ‹©ä¾æ®ï¼šç”¨æˆ·ä»·å€¼ > æŠ€æœ¯ä¾¿åˆ©æ€§
```

**è®¾è®¡åŸåˆ™ä½“ç°ï¼š**
- **ç”¨æˆ·æ„Ÿå— > æŠ€æœ¯ä¼˜é›…**ï¼šé€‰æ‹©è®©ç”¨æˆ·æ„Ÿè§‰æ›´å¿«çš„æ–¹æ¡ˆ
- **å®é™…æ•ˆæœ > ç†è®ºå®Œç¾**ï¼šå…³æ³¨çœŸå®ä½¿ç”¨åœºæ™¯çš„è¡¨ç°
- **é•¿æœŸç¨³å®š > çŸ­æœŸç‚«æŠ€**ï¼šé¿å…ä¸ºäº†å±•ç¤ºæŠ€æœ¯è€Œç‰ºç‰²ç¨³å®šæ€§

### 4.2 ç®€å•æ¶æ„çš„å¤æ‚æ™ºæ…§

**ä¸ºä»€ä¹ˆé€‰æ‹©ç®€å•çš„çŠ¶æ€ç®¡ç†è€Œä¸æ˜¯å¤æ‚çš„æ¶æ„ï¼Ÿ**

Excalidraw çš„æ¶æ„è®¾è®¡ä½“ç°äº†"å°‘å³æ˜¯å¤š"çš„å“²å­¦ï¼š

#### ğŸ¯ **æ¶æ„è®¾è®¡å“²å­¦**

| è®¾è®¡é€‰æ‹© | Excalidraw çš„åŸåˆ™ | è®¾è®¡æ™ºæ…§ |
|---------|-------------------|----------|
| **çŠ¶æ€ç®¡ç†** | ç®€å•çš„å•å‘æ•°æ®æµ | å¯é¢„æµ‹æ€§ > åŠŸèƒ½ä¸°å¯Œæ€§ |
| **ä»£ç ç»“æ„** | ç›´è§‚çš„æ¨¡å—åˆ’åˆ† | è°ƒè¯•ç®€å• > æ¶æ„ä¼˜é›… |
| **æ€§èƒ½ä¼˜åŒ–** | å®ç”¨çš„ä¼˜åŒ–ç­–ç•¥ | æ€§èƒ½ç¨³å®š > ä»£ç æŠ½è±¡ |
| **æ‰©å±•æ€§** | æ¸è¿›å¼å¢å¼º | å½“å‰éœ€è¦ > æœªæ¥å¯èƒ½ |

**æ ¸å¿ƒæ´å¯Ÿï¼š**
```
å¤æ‚çš„æ¶æ„å¾€å¾€æ˜¯ä¸ºäº†è§£å†³å¤æ‚çš„é—®é¢˜ï¼Œ
ä½†æœ€å¥½çš„è®¾è®¡æ˜¯è®©é—®é¢˜å˜å¾—ç®€å•ã€‚

Excalidraw é€šè¿‡çº¦æŸåŠŸèƒ½è¾¹ç•Œï¼Œ
è®©æ•´ä¸ªç³»ç»Ÿä¿æŒåœ¨å¯æ§çš„å¤æ‚åº¦å†…ã€‚
```

### 4.3 çº¦æŸé©±åŠ¨çš„åˆ›æ–°

#### ğŸ”’ **æœ‰æ„ä¹‰çš„é™åˆ¶åˆ›é€ æ— é™çš„å¯èƒ½**

**æ¡ˆä¾‹ï¼šé¢œè‰²é€‰æ‹©çš„é™åˆ¶**

```
å¤§å¤šæ•°ç»˜å›¾å·¥å…·ï¼šæä¾›æ— é™é¢œè‰²é€‰æ‹©
Excalidrawï¼šåªæä¾›é¢„è®¾çš„é¢œè‰²ç»„åˆ

ç»“æœï¼š
- ç”¨æˆ·ä¸ä¼šå› ä¸ºé¢œè‰²é€‰æ‹©è€Œåˆ†å¿ƒ
- å›¾è¡¨é£æ ¼ä¿æŒä¸€è‡´
- åä½œæ—¶å‡å°‘é¢œè‰²å†²çª
- å¼€å‘æˆæœ¬å¤§å¹…é™ä½
```

**è®¾è®¡æ€è€ƒæ¡†æ¶ï¼š**

1. **è¯†åˆ«æ ¸å¿ƒç”¨æˆ·ä»·å€¼**
   - ç”¨æˆ·çœŸæ­£éœ€è¦ä»€ä¹ˆï¼Ÿ
   - ä»€ä¹ˆæ˜¯å¿…é¡»çš„ï¼Œä»€ä¹ˆæ˜¯æœŸæœ›çš„ï¼Ÿ

2. **è®¾å®šæœ‰æ„ä¹‰çš„çº¦æŸ**
   - å“ªäº›é™åˆ¶èƒ½å¸®åŠ©ç”¨æˆ·ä¸“æ³¨ï¼Ÿ
   - å“ªäº›çº¦æŸèƒ½é™ä½å¤æ‚åº¦ï¼Ÿ

3. **åœ¨çº¦æŸä¸­å¯»æ‰¾åˆ›æ–°ç©ºé—´**
   - å¦‚ä½•åœ¨é™åˆ¶ä¸‹åˆ›é€ æ›´å¥½çš„ä½“éªŒï¼Ÿ
   - çº¦æŸå¦‚ä½•å˜æˆä¼˜åŠ¿ï¼Ÿ

## 5. è®¾è®¡å¯å‘ï¼šå¦‚ä½•åº”ç”¨ç®€çº¦è®¾è®¡æ€æƒ³

### 5.1 è®¾è®¡å†³ç­–çš„è¯„ä¼°æ¡†æ¶

**å½“é¢ä¸´äº§å“è®¾è®¡é€‰æ‹©æ—¶ï¼Œé—®è‡ªå·±è¿™äº›é—®é¢˜ï¼š**

#### ğŸ” **åŠŸèƒ½è®¾è®¡å†³ç­–æ¡†æ¶**

1. **ç”¨æˆ·ä»·å€¼è¯„ä¼°**
   ```
   é—®é¢˜ï¼šè¿™ä¸ªåŠŸèƒ½æ˜¯è®©ç”¨æˆ·æ›´å®¹æ˜“å®Œæˆæ ¸å¿ƒä»»åŠ¡å—ï¼Ÿ

   Excalidraw ç­”æ¡ˆï¼š
   - æ·»åŠ çŸ©å½¢å·¥å…· âœ… æ ¸å¿ƒç»˜å›¾éœ€æ±‚
   - æ·»åŠ  3D æ•ˆæœ âŒ åç¦»æ ¸å¿ƒä»·å€¼
   - æ·»åŠ åä½œåŠŸèƒ½ âœ… å¢å¼ºæ ¸å¿ƒä»·å€¼
   ```

2. **è®¤çŸ¥è´Ÿæ‹…è¯„ä¼°**
   ```
   é—®é¢˜ï¼šè¿™ä¸ªåŠŸèƒ½ä¼šå¢åŠ ç”¨æˆ·çš„å­¦ä¹ æˆæœ¬å—ï¼Ÿ

   è¯„ä¼°æ ‡å‡†ï¼š
   - æ˜¯å¦éœ€è¦é¢å¤–çš„æ•™ç¨‹ï¼Ÿ
   - æ˜¯å¦å¢åŠ ç•Œé¢å¤æ‚åº¦ï¼Ÿ
   - æ˜¯å¦ä¸ç°æœ‰åŠŸèƒ½é€»è¾‘ä¸€è‡´ï¼Ÿ
   ```

3. **é•¿æœŸå½±å“è¯„ä¼°**
   ```
   é—®é¢˜ï¼šè¿™ä¸ªåŠŸèƒ½ä¼šå½±å“äº§å“çš„æ ¸å¿ƒä½“éªŒå—ï¼Ÿ

   è€ƒè™‘å› ç´ ï¼š
   - å¯¹æ€§èƒ½çš„å½±å“
   - å¯¹ç»´æŠ¤æˆæœ¬çš„å½±å“
   - å¯¹ç”¨æˆ·æœŸæœ›çš„å½±å“
   ```

### 5.2 ç®€çº¦è®¾è®¡çš„å®è·µæŒ‡å—

#### ğŸ“ **åº”ç”¨åˆ°è‡ªå·±é¡¹ç›®çš„æ–¹æ³•**

**ç¬¬ä¸€æ­¥ï¼šè¯†åˆ«æ ¸å¿ƒä»·å€¼**
```
ç»ƒä¹ ï¼šå†™ä¸‹ä½ çš„äº§å“è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜
- ç”¨ä¸€å¥è¯æè¿°
- å»æ‰æ‰€æœ‰ä¿®é¥°è¯
- é—®è‡ªå·±ï¼šç”¨æˆ·ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªäº§å“ï¼Ÿ

Excalidraw çš„æ ¸å¿ƒä»·å€¼ï¼š
"è®©ä»»ä½•äººéƒ½èƒ½å¿«é€Ÿç”»å‡ºæƒ³æ³•å›¾è¡¨"
```

**ç¬¬äºŒæ­¥ï¼šè®¾å®šçº¦æŸè¾¹ç•Œ**
```
åŸåˆ™ï¼šä¸»åŠ¨è®¾å®šé™åˆ¶æ¯”è¢«åŠ¨æ¥å—é™åˆ¶æ›´å¥½

é—®é¢˜æ¸…å•ï¼š
- å“ªäº›åŠŸèƒ½æ˜¯ç»å¯¹å¿…è¦çš„ï¼Ÿ
- å“ªäº›åŠŸèƒ½å¯èƒ½ä¼šåˆ†æ•£æ³¨æ„åŠ›ï¼Ÿ
- å¦‚ä½•é€šè¿‡å‡å°‘é€‰æ‹©æ¥æ”¹å–„ä½“éªŒï¼Ÿ
```

**ç¬¬ä¸‰æ­¥ï¼šè®¾è®¡å†³ç­–æµ‹è¯•**
```
æ¯ä¸ªæ–°åŠŸèƒ½éƒ½é—®ï¼š
1. è¿™è®©ç”¨æˆ·çš„æ ¸å¿ƒä»»åŠ¡æ›´å®¹æ˜“äº†å—ï¼Ÿ
2. è¿™å¢åŠ äº†è®¤çŸ¥è´Ÿæ‹…å—ï¼Ÿ
3. è¿™ä¸æˆ‘ä»¬çš„æ ¸å¿ƒä»·å€¼ä¸€è‡´å—ï¼Ÿ

åªæœ‰ä¸‰ä¸ªç­”æ¡ˆéƒ½æ˜¯"æ˜¯"ï¼Œæ‰è€ƒè™‘æ·»åŠ ã€‚
```

### 5.2 å…³é”®æŠ€æœ¯ç‚¹è§£æ

```javascript
// 1. å“åº”å¼å°ºå¯¸è®¡ç®—
function calculateCanvasSize() {
  // è·å–å®¹å™¨å°ºå¯¸
  const container = canvas.parentElement;
  const rect = container.getBoundingClientRect();

  // è€ƒè™‘è¾¹è·å’Œæœ€å¤§å°ºå¯¸
  const padding = 40;
  const maxWidth = 1200;
  const maxHeight = 800;

  return {
    width: Math.min(rect.width - padding, maxWidth),
    height: Math.min(rect.height - padding, maxHeight)
  };
}

// 2. æ€§èƒ½ä¼˜åŒ–ï¼šèŠ‚æµ resize äº‹ä»¶
function throttle(func, limit) {
  let inThrottle;
  return function() {
    const args = arguments;
    const context = this;
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}

window.addEventListener('resize', throttle(() => {
  canvas.resize();
}, 100));

// 3. å†…å­˜ç®¡ç†
class CanvasManager {
  constructor() {
    this.resources = new Set();
  }

  createImageBitmap(blob) {
    return createImageBitmap(blob).then(bitmap => {
      this.resources.add(bitmap);
      return bitmap;
    });
  }

  cleanup() {
    this.resources.forEach(resource => {
      if (resource.close) resource.close();
    });
    this.resources.clear();
  }
}
```

## 6. Excalidraw ä¸­çš„åº”ç”¨

è®©æˆ‘ä»¬çœ‹çœ‹ Excalidraw æ˜¯å¦‚ä½•å¤„ç† Canvas åŸºç¡€è®¾ç½®çš„ï¼š

```typescript
// packages/excalidraw/scene/Scene.tsx
export class Scene {
  private canvas: HTMLCanvasElement;
  private rc: RoughCanvas;
  private contextSettings = {
    alpha: true,
    desynchronized: true,  // æ€§èƒ½ä¼˜åŒ–ï¼šå¼‚æ­¥æ¸²æŸ“
    colorSpace: "srgb",
    willReadFrequently: false
  };

  constructor(canvas: HTMLCanvasElement) {
    this.canvas = canvas;
    this.setupCanvas();
  }

  private setupCanvas() {
    const context = this.canvas.getContext("2d", this.contextSettings);

    // è®¾ç½®é»˜è®¤æ ·å¼
    context.imageSmoothingEnabled = true;
    context.imageSmoothingQuality = "high";

    // å¤„ç†é«˜ DPI
    this.handleHighDPI();

    // åˆå§‹åŒ– RoughJS
    this.rc = rough.canvas(this.canvas);
  }

  private handleHighDPI() {
    const dpr = window.devicePixelRatio || 1;
    const rect = this.canvas.getBoundingClientRect();

    // è®¾ç½®å®é™…å°ºå¯¸
    this.canvas.width = rect.width * dpr;
    this.canvas.height = rect.height * dpr;

    // ç¼©æ”¾ä¸Šä¸‹æ–‡
    const context = this.canvas.getContext("2d");
    context.scale(dpr, dpr);

    // è®¾ç½® CSS å°ºå¯¸
    this.canvas.style.width = rect.width + "px";
    this.canvas.style.height = rect.height + "px";
  }
}
```

## 7. ç»ƒä¹ é¢˜

### 7.1 åŸºç¡€ç»ƒä¹ 

1. **åˆ›å»ºè‡ªé€‚åº”ç”»å¸ƒ**
   - åˆ›å»ºä¸€ä¸ªå…¨å± Canvas
   - å¤„ç†çª—å£ resize äº‹ä»¶
   - æ­£ç¡®å¤„ç†é«˜ DPI æ˜¾ç¤º

2. **åæ ‡ç³»ç»Ÿå¯è§†åŒ–**
   - ç»˜åˆ¶åæ ‡è½´å’Œç½‘æ ¼
   - æ˜¾ç¤ºé¼ æ ‡å½“å‰åæ ‡
   - å®ç°åæ ‡å˜æ¢æ¼”ç¤º

3. **åƒç´ æ“ä½œ**
   - å®ç°å›¾ç‰‡ç°åº¦åŒ–
   - å®ç°é©¬èµ›å…‹æ•ˆæœ
   - å®ç°ç®€å•çš„æ»¤é•œ

### 7.2 è¿›é˜¶ç»ƒä¹ 

1. **æ€§èƒ½æµ‹è¯•å·¥å…·**
   ```javascript
   class PerformanceMonitor {
     constructor(canvas) {
       this.canvas = canvas;
       this.ctx = canvas.getContext('2d');
       this.metrics = {
         fps: 0,
         drawCalls: 0,
         renderTime: 0
       };
     }

     // å®ç° FPS ç›‘æ§
     // å®ç°ç»˜åˆ¶è°ƒç”¨è®¡æ•°
     // å®ç°æ¸²æŸ“æ—¶é—´ç»Ÿè®¡
   }
   ```

2. **Canvas ç®¡ç†å™¨**
   ```javascript
   class CanvasLayerManager {
     constructor(container) {
       this.layers = new Map();
       this.container = container;
     }

     // å®ç°å¤šå±‚ Canvas ç®¡ç†
     // å®ç°å±‚çš„æ·»åŠ ã€åˆ é™¤ã€æ’åº
     // å®ç°å±‚çš„æ˜¾ç¤º/éšè—
   }
   ```

## 8. æ€è€ƒé¢˜

1. **ä¸ºä»€ä¹ˆ Excalidraw é€‰æ‹© Canvas è€Œä¸æ˜¯ SVGï¼Ÿ**
   - è€ƒè™‘æ€§èƒ½å› ç´ 
   - è€ƒè™‘åŠŸèƒ½éœ€æ±‚
   - è€ƒè™‘å¯¼å‡ºéœ€æ±‚

2. **å¦‚ä½•åœ¨ Canvas ä¸­å®ç°äº‹ä»¶ç³»ç»Ÿï¼Ÿ**
   - Canvas æœ¬èº«ä¸æ”¯æŒå¯¹è±¡çº§äº‹ä»¶
   - éœ€è¦æ‰‹åŠ¨å®ç°ç¢°æ’æ£€æµ‹
   - éœ€è¦ç»´æŠ¤å…ƒç´ çš„ç©ºé—´ç´¢å¼•

3. **è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
   - å¯¹æ¸²æŸ“è´¨é‡çš„å½±å“
   - å¯¹æ€§èƒ½çš„å½±å“
   - å¯¹å†…å­˜ä½¿ç”¨çš„å½±å“

4. **Canvas çš„æ€§èƒ½ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ**
   - ç»˜åˆ¶è°ƒç”¨æ¬¡æ•°
   - çŠ¶æ€åˆ‡æ¢æˆæœ¬
   - åƒç´ å¡«å……ç‡

5. **å¦‚ä½•é€‰æ‹©åˆé€‚çš„ Canvas å°ºå¯¸ï¼Ÿ**
   - å¹³è¡¡è´¨é‡å’Œæ€§èƒ½
   - è€ƒè™‘ç›®æ ‡è®¾å¤‡
   - åŠ¨æ€è°ƒæ•´ç­–ç•¥

## 9. æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **Canvas åŸºç¡€**
   - Canvas æ˜¯ä½å›¾ç»˜åˆ¶ APIï¼Œé€‚åˆå¤æ‚åŠ¨ç”»å’Œå¤§é‡å›¾å½¢
   - ä¸ SVG å’Œ DOM ç›¸æ¯”ï¼ŒCanvas åœ¨ç‰¹å®šåœºæ™¯ä¸‹æ€§èƒ½æ›´å¥½
   - ç†è§£åæ ‡ç³»ç»Ÿå’Œåƒç´ æ“ä½œæ˜¯åŸºç¡€

2. **é«˜æ¸…é€‚é…**
   - å¿…é¡»å¤„ç†è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰
   - ç‰©ç†åƒç´  vs CSS åƒç´ çš„åŒºåˆ«
   - æ­£ç¡®çš„ç¼©æ”¾å’Œåæ ‡è½¬æ¢

3. **æ€§èƒ½è€ƒè™‘**
   - é€‰æ‹©åˆé€‚çš„ä¸Šä¸‹æ–‡é€‰é¡¹
   - åˆç†è®¾ç½® Canvas å°ºå¯¸
   - æ³¨æ„å†…å­˜ç®¡ç†å’Œèµ„æºæ¸…ç†

4. **å®æˆ˜æŠ€å·§**
   - å“åº”å¼è®¾è®¡çš„å®ç°
   - äº‹ä»¶å¤„ç†çš„åæ ‡è½¬æ¢
   - å¤šå±‚æ¸²æŸ“çš„ç®¡ç†

### ä¸‹ä¸€æ­¥

åœ¨æŒæ¡äº† Canvas åŸºç¡€åï¼Œä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ ï¼š
- Canvas çš„å„ç§ç»˜å›¾ API
- è·¯å¾„çš„æ¦‚å¿µå’Œä½¿ç”¨
- æ ·å¼å’Œæ•ˆæœçš„åº”ç”¨
- å®ç°ä¸€ä¸ªç®€å•çš„ç»˜å›¾å·¥å…·

## 10. å‚è€ƒèµ„æº

- [MDN Canvas API](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API)
- [Canvas Deep Dive](https://joshondesign.com/p/books/canvasdeepdive/)
- [Excalidraw æºç ](https://github.com/excalidraw/excalidraw)
- [HTML5 Canvas Tutorials](https://www.html5canvastutorials.com/)

---

**ä¸‹ä¸€ç« **ï¼š[Canvas å›¾å½¢ç»˜åˆ¶ â†’](./02-canvas-drawing.md)